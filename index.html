<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Cave Runner</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.0.3/pako.min.js"></script>
    <script src="Jam_Engine/Graphics.js"></script>
    <script src="Jam_Engine/Tools.js"></script>
    <script src="Jam_Engine/UI/Button.js"></script>
    <script src="Jam_Engine/Grid.js"></script>
    <script src="Jam_Engine/AStar.js"></script>
    <script src="Jam_Engine/Scene.js"></script>    
    <script src="Entities/Entity.js"></script>
    <script src="Entities/MoveableEntity.js"></script>
    <script src="Entities/Enemy.js"></script>
    <script src="Entities/Gem.js"></script>
    <script src="Player.js"></script>
    <script src="LevelMap.js"></script>
    <script src="Camera.js"></script>
    <script src="GameController.js"></script>
    <script src="Scences/MainGame.js"></script>
    <script src="Scences/Title.js"></script>
    <script src="Scences/GameOver.js"></script>
    <script src="Scences/LargeMap.js"></script>

</head>
<body style="background-color: black;">
    <div class="parent-container"> -->
        <canvas id="myCanvas" width="0" height="0"></canvas>
    </div>
    <button id="playButton"></button> -->

    <script>
        const canvas = document.getElementById('myCanvas');
        const screenBuffer = canvas.getContext('2d');

        screenBuffer.canvas.width  = window.innerWidth;
        screenBuffer.canvas.height = window.innerHeight;
        
        screenBuffer.imageSmoothingEnabled= false;

        let currentScene = new LargeMap();        
        let lastTimestamp = 0; // Store the timestamp of the previous frame

        function changeScene (scene) {
            currentScene = scene;
        }

        function gameLoop(timestamp) {            
            const dt = (timestamp - lastTimestamp) / 1000; // Calculate delta time
            lastTimestamp = timestamp;            
            currentScene.update(dt); // Update and render the game            
            requestAnimationFrame(gameLoop);
        }

        const getMouseInput=(event)=>{ currentScene.getMouseInput(event); }    
        const getMouseMoveInput=(event)=>{ currentScene.getMouseMoveInput(event); }
        const getKeyboardInput=(event)=>{ currentScene.getKeyboardInput(event); }
        
        requestAnimationFrame(gameLoop); // Start the game loop
    </script>
    <script src="Jam_Engine/InputHandler.js"></script>
</body>
</html>
