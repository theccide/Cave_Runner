<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canvas Boilerplate</title>
    <script src="Jam_Engine/Graphics.js"></script>
    <script src="Jam_Engine/Tools.js"></script>\
    <script src="Jam_Engine/UI/Button.js"></script>
    <script src="Jam_Engine/Grid.js"></script>
    <script src="Jam_Engine/AStar.js"></script>
    <script src="Entity.js"></script>
    <script src="Enemy.js"></script>
    <script src="Player.js"></script>
    <script src="GameController.js"></script>
    <script src="aStarGridDemo.js"></script>
</head>
<body>
    <canvas id="myCanvas" width="2200" height="1000"></canvas>
    <button id="playButton"></button>

    <script>
        const canvas = document.getElementById('myCanvas');
        const ctx = canvas.getContext('2d');

        const width = canvas.width;
        const height = canvas.height;

        ctx.imageSmoothingEnabled= false

        // Store the timestamp of the previous frame
        let lastTimestamp = 0;
        let worldMap = new WorldMap({canvas:{width:1888+200,height:928}});
        let images = {};
        // Game loop
        function update(delta) {
            worldMap.update(delta);
        }

        function gameLoop(timestamp) {
            // Calculate delta time
            const dt = (timestamp - lastTimestamp) / 1000; // Convert to seconds
            lastTimestamp = timestamp;

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawBox(0,0,width,height,'black'); 
            drawImageFrom00(images["Images/background1.png"],200,0,1888,928);
            update(dt);

            requestAnimationFrame(gameLoop);
        }

        const getMouseInput=(event)=>{ worldMap.getMouseInput(event);}    
        const getMouseMoveInput=(event)=>{worldMap.getMouseMoveInput(event);}
        const getKeyboardInput=(event)=>{console.log(event);}

        const finishedLoading = (loadedImages) => {
            console.log('loaded');
            images = loadedImages;
            requestAnimationFrame(gameLoop);
        }

        loadImages(["Images/background1.png"],finishedLoading);
        
    </script>
    <script src="Jam_Engine/InputHandler.js"></script>
</body>
</html>
